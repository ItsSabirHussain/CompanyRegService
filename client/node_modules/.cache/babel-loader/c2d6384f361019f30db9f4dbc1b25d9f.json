{"ast":null,"code":"import _toConsumableArray from \"/Users/sabirhussain/Desktop/AzeemDev/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/sabirhussain/Desktop/AzeemDev/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sabirhussain/Desktop/AzeemDev/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sabirhussain/Desktop/AzeemDev/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sabirhussain/Desktop/AzeemDev/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sabirhussain/Desktop/AzeemDev/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sabirhussain/Desktop/AzeemDev/client/src/components/admindashboard/FileViewer.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport './FileViewer.css';\nimport FileBar from './FileBar/FileBar';\nimport { Route, Redirect } from \"react-router-dom\";\n\nvar FileViewer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FileViewer, _Component);\n\n  function FileViewer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, FileViewer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(FileViewer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      files: []\n    };\n    return _this;\n  }\n\n  _createClass(FileViewer, [{\n    key: \"sortBySize\",\n    value: function sortBySize() {\n      var tempFiles = _toConsumableArray(this.state.files);\n\n      tempFiles.sort(function (a, b) {\n        return a - b;\n      });\n      this.setState({\n        files: tempFiles\n      });\n    }\n  }, {\n    key: \"fetchData\",\n    value: function fetchData() {\n      var _this2 = this;\n\n      var headers = {\n        'Authorization': this.props.tokenProp\n      };\n      axios.get('/files/all', {\n        headers: headers\n      }).then(function (response) {\n        var newFiles = response.data;\n\n        _this2.setState({\n          files: newFiles\n        }, function () {});\n      }).catch(function (err) {\n        if (err.response.status === 401) {\n          _this2.props.logout();\n        }\n      });\n    }\n    /**@param fileId string representing the file id */\n\n    /**Handles click on a \"copy-download-link-to-clipboard\" button */\n\n  }, {\n    key: \"onCopy\",\n    value: function onCopy(fileId) {\n      var tempEle = document.createElement(\"input\");\n      tempEle.value = window.location.host + \"/files/download/\" + fileId;\n      document.body.appendChild(tempEle);\n      tempEle.select();\n      document.execCommand(\"copy\");\n      document.body.removeChild(tempEle);\n    }\n    /**@param fileId string representing the file id */\n\n    /**Handles click on a \"delete file\" button */\n\n  }, {\n    key: \"onDeleteHandler\",\n    value: function onDeleteHandler(fileId) {\n      var _this3 = this;\n\n      var headers = {\n        Authorization: this.props.tokenProp\n      };\n      axios.delete('/files/' + fileId, {\n        headers: headers\n      }).then(function (response) {\n        _this3.fetchData();\n      }).catch(function (err) {\n        if (err.response.status === 401) {\n          _this3.props.logout();\n        }\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchData();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        className: \"allfiles-tbl-top-div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, this.state.files.length > 0 ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"tbl-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        id: \"top-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        className: \"file-name-property\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"File Name\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Size\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Download\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"Delete\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Copy Link\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Upload Date\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"File Description\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, this.state.files.map(function (f) {\n        return React.createElement(FileBar, {\n          key: f._id,\n          size: f.length,\n          filename: f.filename,\n          fileId: f._id,\n          onDelete: _this4.onDeleteHandler.bind(_this4, f._id),\n          onCopy: _this4.onCopy.bind(_this4, f._id),\n          uploadDate: new Date(f.uploadDate).toLocaleString(),\n          fileDescription: f.metadata.uploadDescription,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        });\n      }))))) : React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"There are no files at the moment...\"), console.log(this.state.files[0]));\n    }\n  }]);\n\n  return FileViewer;\n}(Component);\n\nexport default FileViewer;","map":{"version":3,"sources":["/Users/sabirhussain/Desktop/AzeemDev/client/src/components/admindashboard/FileViewer.js"],"names":["React","Component","axios","FileBar","Route","Redirect","FileViewer","state","files","tempFiles","sort","a","b","setState","headers","props","tokenProp","get","then","response","newFiles","data","catch","err","status","logout","fileId","tempEle","document","createElement","value","window","location","host","body","appendChild","select","execCommand","removeChild","Authorization","delete","fetchData","length","map","f","_id","filename","onDeleteHandler","bind","onCopy","Date","uploadDate","toLocaleString","metadata","uploadDescription","console","log"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\nimport './FileViewer.css';\nimport FileBar from './FileBar/FileBar';\nimport { Route, Redirect } from \"react-router-dom\";\n\n\nclass FileViewer extends Component{\n\n    state={\n        files:[]\n    }\n\n/**Not done yet */\n    sortBySize(){\n        let tempFiles=[...this.state.files];\n        tempFiles.sort((a,b)=>a-b);\n        this.setState({files:tempFiles});\n    }\n\n\n    fetchData(){\n        let headers = {\n            'Authorization' : this.props.tokenProp,\n        }\n\n        axios.get('/files/all',{headers:headers})\n        .then(response=>{\n            let newFiles = response.data;\n            this.setState({files:newFiles}, ()=>{\n        });\n\n        })\n        .catch(err=>{\n            if (err.response.status === 401){\n                this.props.logout();\n            }\n        })\n    }\n\n    /**@param fileId string representing the file id */\n    /**Handles click on a \"copy-download-link-to-clipboard\" button */\n    onCopy(fileId){\n\n        let tempEle = document.createElement(\"input\");\n        tempEle.value = window.location.host+\"/files/download/\"+fileId;\n        document.body.appendChild(tempEle);\n        tempEle.select();\n        document.execCommand(\"copy\");\n        document.body.removeChild(tempEle);\n    }\n\n    /**@param fileId string representing the file id */\n    /**Handles click on a \"delete file\" button */\n    onDeleteHandler(fileId){\n\n        let headers = {\n            Authorization:this.props.tokenProp,\n        }\n        axios.delete('/files/'+fileId,{headers:headers})\n        .then(response=>{\n            this.fetchData();\n        })\n        .catch(err=>{\n            if (err.response.status === 401){\n                this.props.logout();\n            }\n        })\n    }\n\n\n    componentDidMount(){\n        this.fetchData();\n    }\n\n\n    render(){\n        return (\n            <div className=\"allfiles-tbl-top-div\">\n                {this.state.files.length>0?\n                (\n                    <React.Fragment>\n\n                        <div className=\"tbl-container\">\n                            <table>\n                    \n                                <thead>\n                                    <tr id=\"top-row\">\n                                        <th className=\"file-name-property\">\n                                            {\"File Name\"}\n                                        </th>\n                                        <th>\n                                            {\"Size\"}\n                                        </th>\n                                        <th>\n                                            {\"Download\"}\n                                        </th>\n                                        <th>\n                                            {\"Delete\"}\n                                        </th>\n                                        <th>\n                                            {\"Copy Link\"}\n                                        </th>\n                                        <th>\n                                            {\"Upload Date\"}\n                                        </th>\n                                        <th>\n                                            {\"File Description\"}\n                                        </th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {this.state.files\n                                    .map(f=>{\n                                        return (<FileBar key={f._id}\n                                            size={f.length}\n                                            filename={f.filename}\n                                            fileId={f._id}\n                                            onDelete={this.onDeleteHandler.bind(this, f._id)}\n                                            onCopy={this.onCopy.bind(this,f._id)}\n                                            uploadDate={new Date(f.uploadDate).toLocaleString()}\n                                            fileDescription={f.metadata.uploadDescription}/>)\n                                            })}\n                                </tbody>\n                            </table>\n                        </div>\n                    </React.Fragment>\n\n                )\n                :\n                (<h1>There are no files at the moment...</h1>)}\n                {console.log(this.state.files[0])}\n            </div>\n            \n        );   \n    }\n}\n\n\nexport default FileViewer;"]},"metadata":{},"sourceType":"module"}