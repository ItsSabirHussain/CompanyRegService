{"ast":null,"code":"import _classCallCheck from \"/Users/sabirhussain/Desktop/AzeemDev/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sabirhussain/Desktop/AzeemDev/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sabirhussain/Desktop/AzeemDev/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sabirhussain/Desktop/AzeemDev/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sabirhussain/Desktop/AzeemDev/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sabirhussain/Desktop/AzeemDev/client/src/components/cuserdashboard/Upload.js\";\nimport React, { Component } from 'react';\nimport './Upload.css';\nimport axios from 'axios';\nimport Dropzone from 'react-dropzone';\nimport FileBox from './FileBox/FileBox';\n\nvar Upload =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Upload, _Component);\n\n  function Upload() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Upload);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Upload)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      files: [],\n      description: ''\n    };\n\n    _this.descriptionChangedHandler = function (event) {\n      _this.setState({\n        description: event.target.value\n      });\n    };\n\n    _this.submitFilesHandler = function (event) {\n      event.target.value = \"Uploading...\";\n      event.preventDefault();\n      var headers = {\n        \"Type\": \"formData\",\n        'Authorization': _this.props.tokenProp,\n        \"UploadDescription\": _this.state.description\n      };\n      var formData = new FormData();\n\n      _this.state.files.forEach(function (file) {\n        formData.append(\"files\", file);\n      });\n\n      axios.post('/files/upload', formData, {\n        headers: headers\n      }).then(function (response) {\n        window.location.href = window.location.href + \"allfiles\";\n      }).catch(function (err) {\n        _this.props.logout();\n      });\n    };\n\n    _this.onDrop = function (files) {\n      _this.setState({\n        files: files\n      });\n    };\n\n    _this.onRemove = function (event, index) {\n      event.preventDefault();\n      event.stopPropagation(); //prevent clicking outer div\n\n      var tempFiles = _this.state.files.slice();\n\n      tempFiles.splice(index, 1);\n\n      _this.setState({\n        files: tempFiles\n      });\n    };\n\n    _this.fileInputChangedHandler = function (event) {\n      _this.setState({\n        files: event.target.files\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Upload, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var style = {\n        overflowY: \"scroll\",\n        width: \"400px\"\n      };\n      return React.createElement(\"div\", {\n        className: \"upload-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.submitFilesHandler,\n        encType: \"multipart/form-data\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"upload-tbl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(Dropzone, {\n        onDrop: this.onDrop.bind(this),\n        className: \"dropzone\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, this.state.files.length === 0 ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Try dropping some files here, or click to select files to upload.\") : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, this.state.files.map(function (f, index) {\n        return React.createElement(FileBox, {\n          key: f.name,\n          fileName: f.name,\n          size: f.size,\n          onRemove: _this2.onRemove,\n          index: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        });\n      }))))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        maxlength: \"30\",\n        placeholder: \"Describe your upload... (30 chars)\",\n        type: \"text\",\n        onChange: this.descriptionChangedHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Upload!\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return Upload;\n}(Component);\n\nexport default Upload;","map":{"version":3,"sources":["/Users/sabirhussain/Desktop/AzeemDev/client/src/components/cuserdashboard/Upload.js"],"names":["React","Component","axios","Dropzone","FileBox","Upload","state","files","description","descriptionChangedHandler","event","setState","target","value","submitFilesHandler","preventDefault","headers","props","tokenProp","formData","FormData","forEach","file","append","post","then","response","window","location","href","catch","err","logout","onDrop","onRemove","index","stopPropagation","tempFiles","slice","splice","fileInputChangedHandler","style","overflowY","width","bind","length","map","f","name","size"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './Upload.css';\nimport axios from 'axios';\nimport Dropzone from 'react-dropzone';\nimport FileBox from './FileBox/FileBox';\n\n\nclass Upload extends Component{\n\n    state={\n        files: [],\n        description: ''\n        }\n\n    descriptionChangedHandler = event =>{\n        this.setState({description:event.target.value});\n    }\n\n    submitFilesHandler = event =>{\n        event.target.value=\"Uploading...\";\n        event.preventDefault();\n        \n        let headers = {\n           \"Type\": \"formData\",\n           'Authorization' : this.props.tokenProp,\n           \"UploadDescription\": this.state.description\n        }\n\n        let formData = new FormData();\n        this.state.files.forEach(file=>{\n            formData.append(\"files\",file);\n        })\n        axios.post('/files/upload', formData, {headers:headers})\n        .then(response=>{\n            window.location.href = window.location.href+\"allfiles\";\n        })\n        .catch(err=>{\n            this.props.logout();\n        })\n\n    }\n\n/**On adding a file */\n    onDrop = files=>{\n        this.setState({files:files});\n\n    }\n\n    onRemove = (event, index) =>{\n        event.preventDefault();\n        event.stopPropagation(); //prevent clicking outer div\n        let tempFiles = this.state.files.slice();\n        tempFiles.splice(index,1);\n        this.setState({files:tempFiles});\n    }\n\n    fileInputChangedHandler = (event) =>{\n        this.setState({files: event.target.files});\n    }\n\n    render(){\n\n        const style={\n            overflowY:\"scroll\",\n            width:\"400px\"\n        }\n\n        return (\n            <div className=\"upload-form\">\n\n                <form onSubmit={this.submitFilesHandler} encType=\"multipart/form-data\">\n                    <table className=\"upload-tbl\">\n                    <tbody>\n                        <tr><th></th>\n                        <td>\n                            <Dropzone onDrop={this.onDrop.bind(this)} className=\"dropzone\">\n                            {this.state.files.length===0?(\n                                <p>Try dropping some files here, or click to select files to upload.</p>\n                            )\n                                :(<div>\n                                    {\n                                    this.state.files.map((f,index) => <FileBox\n                                        key={f.name}\n                                        fileName={f.name}\n                                        size={f.size}\n                                        onRemove={this.onRemove}\n                                        index={index}\n                                        />)\n                                    }\n                                </div>)}\n\n                            </Dropzone>\n                            \n                            </td></tr>\n                        <tr><th></th><td><input maxlength=\"30\"placeholder=\"Describe your upload... (30 chars)\" type=\"text\" onChange={this.descriptionChangedHandler}></input></td></tr>\n                        <tr><th></th><td><input type=\"submit\" value=\"Upload!\"></input></td></tr>\n                    </tbody>\n                    </table>\n                </form>\n\n            </div>\n\n        );\n    }\n}\n\n\nexport default Upload;"]},"metadata":{},"sourceType":"module"}